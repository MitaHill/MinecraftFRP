# [项目名称] 项目企划与架构文档

## 1. 项目概述
[在此处填写项目的简要介绍，说明其目标用户、核心功能和主要价值。]

## 1.5 对AI开发助手的说明
当你阅读此行文字时，请记住：
这个项目的代码质量要求非常高，必须严格遵守本文档中的各项规范和要求。
请务必完整、准确地理解并执行文档中的每一条规范，确保生成的代码符合项目的高标准。
如果你在生成代码时遇到任何不确定的地方，请务必参考并遵循本项目企划与架构文档中的相关内容，确保代码质量和一致性。
你的每一次代码生成都将直接影响项目的整体质量和可维护性，请务必认真对待每一个细节，严格按照文档要求进行编码。
感谢你的理解与配合！
以及请使用**简体中文**语言和用户进行对话沟通，以确保信息传达的准确性和一致性。
*   **交互式脚本**: AI助手不应尝试执行需要用户输入的交互式脚本。应当等待用户手动执行，并根据用户提供的结果或反馈来继续下一步工作。

## 2. 技术栈
- **编程语言**: [例如: Python 3.8+]
- **核心框架**: [例如: Django, Flask, PySide6, React]
- **数据库**: [例如: PostgreSQL, MySQL, SQLite]
- **依赖管理**: [例如: pip (requirements.txt), npm (package.json)]
- **打包工具**: [例如: Docker, Nuitka, Webpack]
- **版本控制**: Git

## 3. Git 工作流与规范 (严格执行)

本项目采用严格的 Git 提交与分支管理规范，以确保代码库的整洁与可维护性。

### 3.1 分支管理策略
*   **主分支 (`main`)**: 仅存放经过测试、稳定可发行的代码。
*   **开发分支 (`develop`)**: 日常开发的基础分支，汇集所有已完成的功能。
*   **功能/修复分支 (`feat/xxx`, `fix/xxx`)**: 所有的开发工作**必须**在独立分支上进行。
    *   **规则**: 每进行一次较大的功能开发或架构调整时，**必须**新建一个分支。
    *   **命名范例**:
        *   新增功能: `feat/user-authentication`
        *   修复 Bug: `fix/payment-calculation-error`
        *   重构代码: `refactor/config-module`
    *   **合并要求**: 分支代码在确认无异常、通过代码审查(Code Review)后，方可合并到 `develop` 或 `main` 分支。

### 3.2 Commit 提交规范
每次改动（即使是微小的改动）都应进行 Commit，避免一次性提交大量无关更改。

**格式**: `<Type>: <Subject>`

*   **Type (类型)**:
    *   `feat`: 新功能 (Feature)
    *   `fix`: 修复 Bug
    *   `docs`: 文档修改
    *   `style`: 代码格式修改 (不影响逻辑)
    *   `refactor`: 代码重构 (既无新功能也无 Bug 修复)
    *   `test`: 增加或修改测试
    *   `chore`: 构建过程或辅助工具的变动

*   **Subject (主题)**: 简短描述本次修改的内容 (50字以内)。

**Commit 范例**:
> `feat: 实现用户身份验证模块`  
> `fix: 修复订单金额计算错误的问题`  
> `docs: 更新API接口文档`  
> `refactor: 重构缓存管理逻辑`

## 4. 开发路线图 (Roadmap)

### 版本 1.0 (MVP)
*   [ ] 核心功能 A
*   [ ] 核心功能 B
*   [ ] 用户登录与注册

### 版本 1.1
*   [ ] 优化功能 A
*   [ ] 新增功能 C

### 待开发/优化计划
*   [ ] 进一步完善异常处理机制
*   [ ] 提升性能
*   [ ] 增加更多自定义选项


## 5. 目录结构

```
[ProjectName]/
├── main.py                 # 程序主入口 (Minimal)
├── config/                 # 配置文件目录
│   └── settings.yaml       # 应用主配置
├── src/                    # 源代码目录
│   ├── __init__.py
│   ├── core/               # 核心业务逻辑
│   ├── api/                # API 接口模块
│   ├── models/             # 数据模型
│   ├── services/           # 服务层
│   └── utils/              # 通用工具模块
├── tests/                  # 测试代码目录
├── scripts/                # 辅助脚本 (构建、部署等)
├── requirements.txt        # 依赖列表
└── README.md
```

## 6. 模块设计与命名规范 (Module Design & Naming)

### 6.1 职责单一化与细分 (Single Responsibility & Granularity)
*   **单一职责原则 (SRP)**: 每个模块文件应仅负责一个单一的功能点或逻辑单元。避免创建“上帝类”。
*   **文件粒度**: 严格控制单个文件的代码量。
*   **多模块与子目录**: 鼓励建立多个模块文件及子目录来组织代码。

### 6.2 命名规范 (Naming Convention)
*   **模块文件名**: 必须采用 **驼峰命名法 (UpperCamelCase)** 或 **蛇形命名法 (snake_case)**，在项目内保持统一。
    *   例如: `PacketHandler.py`, `config_loader.py`。
*   **类名**: 使用大驼峰命名法 (UpperCamelCase)。
*   **目录名**: 使用全小写蛇形命名法 (snake_case)。

### 6.3 辅助脚本规范 (Scripting Convention)
*   **语言统一**: 为保证项目的技术栈统一与可维护性，所有辅助脚本（如构建、部署、自动化任务等）**必须**使用项目核心语言（如 **Python**）编写。
*   **入口文件**: 在 `scripts/` 目录下提供清晰的脚本入口，如 `scripts/build.py`。

## 7. 配置、数据与入口规范 (Config, Data & Entry Point)

### 7.1 程序入口 (Entry Point)
*   **文件**: `main.py` (或 `app.py`)
*   **原则**: **最小化 (Minimalism)**。
    *   仅负责参数解析、加载配置、初始化核心服务及启动主循环/服务。
    *   **严禁**在入口文件中编写业务逻辑。

### 7.2 配置文件 (Configuration)
*   **目录**: `config/`
*   **格式**: 推荐使用 **YAML** (`.yaml`) 或 **TOML** (`.toml`)，易于阅读和维护。
*   **用途**: 存储应用配置、环境设置等。

## 8. 日志与异常处理规范 (Logging & Error Handling)

### 8.1 全局日志集成 (Global Integration)
*   **强制要求**: 项目中每一个功能模块和逻辑类都应集成统一的 `Logger` 模块。
*   **高强度记录**: 关键行为（网络请求、状态变更、数据库IO）必须有日志记录。
*   **调试追踪**: 错误排查以日志为第一依据。

### 8.2 日志等级与格式
*   **[INFO]**: 正常流程、状态更新。
*   **[WARN]**: 非致命异常、潜在问题。
*   **[ERROR]**: 功能失败、捕获的异常。
*   **[CRITICAL]**: 导致程序崩溃的严重错误。

### 8.3 异常捕获
*   所有的 `try-except` 块中，`except` 分支必须记录详细的错误信息。
*   避免使用过于宽泛的 `except Exception:`，应尽可能捕获具体的异常类型。

## 9. 安全与稳定性规范 (Security & Stability)

### 9.1 敏感数据处理
*   **禁止明文**: 严禁在源代码或配置文件中以明文形式存储敏感数据（如 API 密钥、数据库密码、Token）。
*   **环境变量**: 优先使用环境变量来管理敏感信息。
*   **加密存储**: 如必须存储，应加密存储（如使用 Vault 或 AES 加密），并在运行时动态解密。

### 9.2 线程/并发安全
*   **优雅退出**: 程序退出时，必须确保所有子线程/协程已安全终止。
*   **资源锁定**: 在访问共享资源时，必须使用锁 (Lock)、信号量 (Semaphore) 等同步机制，防止竞态条件。

## 10. 项目变更日志 (Logs)

**重要规则**: 任何对项目架构、功能逻辑或规范的重大修改，都**必须**在此文档中进行记录。记录应参考 Git Commit 记录，确保可追溯性。

| 日期 (Date) | 类型 (Type) | 描述 (Description) | Git Hash (Short) / Branch |
| :--- | :--- | :--- | :--- |
| [YYYY-MM-DD] | `docs` | 创建项目企划与架构文档 | [Initial Commit Hash] |
|            |             |                    |                             |
|            |             |                    |                             |
|            |             |                    |                             |
